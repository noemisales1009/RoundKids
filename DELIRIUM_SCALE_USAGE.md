// EXEMPLO DE COMO USAR O COMPONENTE DeliriumPediatricoScale NO APP.tsx

// 1. Importar o componente no topo do App.tsx
import { DeliriumPediatricoScale } from './components/DeliriumPediatricoScale';

// 2. Usar na seção de escalas clínicas (dentro de ScaleView)
// O componente já está integrado com sua prop onSaveScore que chama addScaleScoreToPatient

// Exemplo no template JSX:
{scaleView === 'delirium-pediatrico' && (
  <div className='bg-slate-800 rounded-xl overflow-hidden -m-4'>
    <button 
      onClick={() => setScaleView('list')} 
      className="flex items-center gap-2 text-sm text-blue-500 dark:text-blue-400 font-semibold mb-4 p-4 hover:bg-slate-700 w-full text-left"
    >
      <BackArrowIcon className="w-4 h-4" />
      Voltar para Escalas
    </button>
    <div className="p-4 pt-0">
      <DeliriumPediatricoScale onSaveScore={handleSaveScaleScore} />
    </div>
  </div>
)}

// 3. Adicionar à lista de escalas no menu
// A escala de Delirium Pediátrico com 4 sub-escalas (CAPD, SOS-PD, pCAM-ICU, psCAM-ICU)

// ============================================================================
// CARACTERÍSTICAS DO COMPONENTE
// ============================================================================

// ✅ 4 Escalas Clínicas Integradas:
// - CAPD (Cornell Assessment of Pediatric Delirium) - 8 itens, score 0-4
// - SOS-PD (Sophia Observation Withdrawal/Delirium) - 6 itens, score 0-2
// - psCAM-ICU (Preschool CAM-ICU) - 4 critérios binários (6 meses-5 anos)
// - pCAM-ICU (Pediatric CAM-ICU) - 4 critérios binários (≥5 anos)

// ✅ Interface Profissional:
// - 4 telas: intro (menu), camicu_select (sub-menu), form (avaliação), resultado (diagnóstico)
// - Menu principal com opções rápidas
// - Header fixo com barra de progresso
// - Auto-scroll entre questões
// - Cores dinâmicas por escala

// ✅ Integração Supabase:
// - Salva scores na tabela 'scale_scores'
// - Interpretação automática com cores (verde/vermelho/amarelo)
// - Validação de todas as respostas antes de calcular

// ✅ Callbacks:
// onSaveScore({ scaleName: string, score: number, interpretation: string })
// - Integrado com sua função addScaleScoreToPatient

// ============================================================================
// TABELA SUPABASE NECESSÁRIA
// ============================================================================
/*
create table public.scale_scores (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  patient_id uuid not null,
  scale_name text not null,
  score integer not null,
  interpretation text not null,
  date timestamp with time zone not null default now(),
  constraint scale_scores_pkey primary key (id),
  constraint scale_scores_patient_id_fkey foreign KEY (patient_id) references patients (id) on delete CASCADE
) TABLESPACE pg_default;

-- Criar índices para melhor performance
create index scale_scores_patient_id_idx on public.scale_scores(patient_id);
create index scale_scores_scale_name_idx on public.scale_scores(scale_name);
create index scale_scores_patient_date_idx on public.scale_scores(patient_id, date desc);
*/

// ============================================================================
// TIPOS
// ============================================================================

interface DeliriumScaleProps {
  onSaveScore?: (data: { 
    scaleName: string;      // Nome da escala (CAPD, SOS-PD, pCAM-ICU, psCAM-ICU)
    score: number;          // Pontuação (ou 0 para binárias)
    interpretation: string; // Interpretação (ex: "CAPD POSITIVO", "Delirium NEGATIVO")
  }) => void;
}

// ============================================================================
// FLUXO DE USO
// ============================================================================

// 1. Usuário clica em "Escala de Delirium Pediátrico"
// 2. Vê menu com 4 opções: CAPD, SOS-PD, pCAM-ICU / psCAM-ICU
// 3. Seleciona a escala apropriada
// 4. Responde todas as questões (componente força responder tudo)
// 5. Clica em "Finalizar e Ver Diagnóstico"
// 6. Vê resultado com interpretação colorida
// 7. Clica em "Salvar Avaliação"
// 8. Callback onSaveScore é acionado
// 9. Função addScaleScoreToPatient salva no Supabase
// 10. Usuário recebe notificação de sucesso

// ============================================================================
// INTERPRETAÇÕES
// ============================================================================

// CAPD (Score 0-32, corte: ≥9):
// < 9: CAPD NEGATIVO (sem delirium)
// ≥ 9: CAPD POSITIVO (delirium detectado)

// SOS-PD (Score 0-12, corte: ≥4):
// < 4: SOS-PD NEGATIVO (sem síndrome de abstinência/delirium)
// ≥ 4: SOS-PD POSITIVO (síndrome presente)

// pCAM-ICU / psCAM-ICU (Binário):
// C1 E C2 E (C3 OU C4) preenchidos: Delirium POSITIVO
// Caso contrário: Delirium NEGATIVO

// ============================================================================
// MELHORIAS FUTURAS
// ============================================================================

// - Carregar histórico de escalas do paciente
// - Gráfico temporal de scores
// - Comparação entre escalas
// - Exportar resultado em PDF
// - Compartilhar com outro médico
// - Recomendações baseadas no resultado
